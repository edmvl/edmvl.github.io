(function(e){function t(t){for(var r,a,s=t[0],u=t[1],c=t[2],l=0,f=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},i=[];function a(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"6b56eee2"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var i,u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=a(e);var c=new Error;i=function(t){u.onerror=u.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,n[1](c)}o[e]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:u})}),12e4);u.onerror=u.onload=i,document.head.appendChild(u)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0262":function(e){e.exports=JSON.parse('{"anonimous":"anonimous","from":"from","new_askbutton_text":"Ask","new_questioninput_placeholder":"Enter your question","home_askbutton_text":"Ask","home_exitbutton_text":"Exit","home_enterbutton_text":"Enter","home_anonimuslabel_text":"Anonimously","login_autorization_text":"Authorization","login_registrationbutton_text":"Registration","login_emailinput_placeholder":"Email","login_passwordinput_placeholder":"Password","login_backbutton_text":"Back","login_enterbutton_text":"Enter","register_autorization_text":"Authorization","register_registrationbutton_text":"Registration","register_logininput_placeholder":"Login","register_emailinput_placeholder":"Email","register_passwordinput_placeholder":"Password","register_backbutton_text":"Back","register_registerbutton_text":"Register","deletion_confirm":"Confirm","are_you_sure?":"are you sure?","cancel":"Cancel","accept":"Accept","enter_comment":"Enter you commentary","loading":"Loading"}')},"034f":function(e,t,n){"use strict";var r=n("85ec"),o=n.n(r);o.a},"2ae3":function(e,t,n){},"85ec":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("b64b"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.userInited?n("div",{attrs:{id:"app"}},["ru"===e.getCurrentLocale()?n("a",{staticClass:"i18nflag",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.setCurrentLocale("en")}}},[n("flag",{attrs:{iso:"us"}})],1):e._e(),"en"===e.getCurrentLocale()?n("a",{staticClass:"i18nflag",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.setCurrentLocale("ru")}}},[n("flag",{attrs:{iso:"ru"}})],1):e._e(),n("router-view")],1):n("div",[n("LoaderComponent")],1)},i=[],a=n("d4ec"),s=n("bee2"),u=n("262e"),c=n("2caf"),l=n("9ab4"),d=n("60a3"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},m=[],p=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,[{key:"mounted",value:function(){this.$vs.loading({type:"material",text:this.$t("loading")})}},{key:"beforeDestroy",value:function(){this.$vs.loading.close()}}]),n}(d["b"]);p=Object(l["__decorate"])([Object(d["a"])({})],p);var g=p,h=g,_=n("2877"),v=Object(_["a"])(h,f,m,!1,null,"807dd7d4",null),b=v.exports,y=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,[{key:"getCurrentLocale",value:function(){return this.$i18n.locale}},{key:"setCurrentLocale",value:function(e){this.$i18n.locale=e}},{key:"userInited",get:function(){return this.$store.getters.userInited}}]),n}(d["b"]);y=Object(l["__decorate"])([Object(d["a"])({components:{LoaderComponent:b}})],y);var x=y,k=x,w=(n("034f"),Object(_["a"])(k,o,i,!1,null,null,null)),j=w.exports,O=(n("d3b7"),n("8c4f")),$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("vs-row",{attrs:{"vs-justify":"center"}},[n("vs-button",{attrs:{color:"dark",type:"border"},on:{click:e.ask}},[e._v(e._s(e.$t("home_askbutton_text"))+" ")]),n("vs-chip",[e._v(" "+e._s(e.isUserLoggedIn?e.login:e.$t("home_anonimuslabel_text"))+" ")]),e.isUserLoggedIn?n("vs-button",{attrs:{color:"dark",type:"border"},on:{click:e.logout}},[e._v(" "+e._s(e.$t("home_exitbutton_text"))+" ")]):n("vs-button",{attrs:{color:"dark",type:"border"},on:{click:e.logingIn}},[e._v(e._s(e.$t("home_enterbutton_text"))+" ")])],1),n("QuestionList")],1)},L=[],I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vs-row",{attrs:{"vs-justify":"center"}},[n("vs-col",{attrs:{type:"flex","vs-justify":"center","vs-align":"center","vs-w":"6"}},e._l(e.questions,(function(t){return n("vs-card",{key:t.id,on:{click:function(t){return t.preventDefault(),e.toQuestion(t)}}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("h3",[e._v(" "+e._s(t.question)+" ")]),t.login===e.login||"zhendozzz"===e.login?n("span",{staticClass:"buttons"},[n("vs-button",{attrs:{color:"white","text-color":"red"},on:{click:function(n){return e.deleteQuestion(t.id)}}},[e._v("x")])],1):e._e(),n("vs-row",{attrs:{"vs-justify":"flex-end"}},[e._v(" "+e._s(e.$t("from"))+" "+e._s(null!=t.login?t.login:e.$t("anonimous"))+" "+e._s(t.date)+" "+e._s(t.time)+" ")])],1),n("div",{attrs:{slot:"extra-content"},slot:"extra-content"},[e._l(t.comments,(function(t){return n("vs-row",{key:t},[e._v(" "+e._s(t)+" "),n("vs-divider")],1)})),n("vs-row",{attrs:{"vs-justify":"center","vs-align":"center"}},[n("vs-input",{staticClass:"commentInput",attrs:{color:"dark",type:"text","label-placeholder":e.$t("enter_comment")},on:{keypress:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.onCommentEnter(t.id)}},model:{value:e.comments[t.id],callback:function(n){e.$set(e.comments,t.id,n)},expression:"comments[question.id]"}})],1)],2)])})),1)],1)},z=[],q=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.apply(this,arguments),e.comments={},e}return Object(s["a"])(n,[{key:"deleteQuestion",value:function(e){var t=this.$store.dispatch,n={type:"confirm",color:"danger",title:this.$t("deletion_confirm"),text:this.$t("are_you_sure?"),acceptText:this.$t("accept"),cancelText:this.$t("cancel"),accept:function(){t("deleteQuestion",e)}};this.$vs.dialog(n)}},{key:"toQuestion",value:function(e){this.$router.push({path:"/question/"+e})}},{key:"onCommentEnter",value:function(e){var t=this.comments[e];this.$store.dispatch("addComment",{questionId:e,comment:t}),this.comments[e]=""}},{key:"created",value:function(){this.$store.dispatch("fetchQuestionList")}},{key:"questions",get:function(){return this.$store.getters.questions}},{key:"login",get:function(){return this.$store.getters.login||""}}]),n}(d["b"]);q=Object(l["__decorate"])([d["a"]],q);var E=q,C=E,U=(n("d167"),Object(_["a"])(C,I,z,!1,null,"f563cffe",null)),Q=U.exports,P=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,[{key:"ask",value:function(){this.$router.push({path:"/new"})}},{key:"logingIn",value:function(){this.$router.push({path:"/login"})}},{key:"logout",value:function(){this.$store.dispatch("logoutUser")}},{key:"isUserLoggedIn",get:function(){return this.$store.getters.isUserLoggedIn}},{key:"email",get:function(){return this.$store.getters.email}},{key:"login",get:function(){return this.$store.getters.login}}]),n}(d["b"]);P=Object(l["__decorate"])([Object(d["a"])({components:{QuestionList:Q}})],P);var A=P,S=A,T=Object(_["a"])(S,$,L,!1,null,null,null),R=T.exports;r["default"].use(O["a"]);var D=[{path:"/",name:"Home",component:R},{path:"/new",name:"NewQuestion",component:function(){return n.e("about").then(n.bind(null,"3474"))}},{path:"/login",name:"Login",component:function(){return n.e("about").then(n.bind(null,"578a"))}},{path:"/register",name:"Register",component:function(){return n.e("about").then(n.bind(null,"1feb"))}}],B=new O["a"]({mode:"history",base:"/",routes:D}),N=B,J=n("2f62"),M=(n("96cf"),n("1da1")),W=n("8aa5");r["default"].use(J["a"]);var F={state:{uid:null,userInited:!1,email:null,login:null},mutations:{setUser:function(e,t){null!=t?(e.uid=t.uid,e.email=t.email,e.login=t.login):(e.uid=null,e.email=null,e.login=null)},setUserInited:function(e,t){e.userInited=t.userInited}},getters:{uid:function(e){return e.uid},isUserLoggedIn:function(e){return null!=e.uid},login:function(e){return e.login},email:function(e){return e.email},userInited:function(e){return e.userInited}},actions:{registerUser:function(e,t){return Object(M["a"])(regeneratorRuntime.mark((function n(){var r,o,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r("clearError"),r("setLoading",!0),n.prev=3,n.next=6,W["auth"]().createUserWithEmailAndPassword(t.email,t.password);case 6:if(o=n.sent,!o.user){n.next=14;break}return i=o.user,a={uid:i.uid,login:t.login,email:t.email},n.next=12,W["database"]().ref("users").push(a);case 12:r("setUser",a),r("setLoading",!1);case 14:n.next=21;break;case 16:throw n.prev=16,n.t0=n["catch"](3),r("setError",n.t0.reason),r("setLoading",!1),n.t0;case 21:case"end":return n.stop()}}),n,null,[[3,16]])})))()},loginUser:function(e,t){return Object(M["a"])(regeneratorRuntime.mark((function n(){var r,o,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r("clearError"),r("setLoading",!0),n.prev=3,n.next=6,W["auth"]().signInWithEmailAndPassword(t.email,t.password);case 6:o=n.sent,o.user&&(i=o.user,a=W["database"]().ref("users"),a.limitToLast(1).orderByChild("uid").equalTo(null!=i?i.uid:"-1").on("value",(function(e){var t=e.val(),n=Object.keys(t),o=n.length>0?t[n[0]]:{};if(o){var i={uid:o.uid,login:o.login,email:o.email};r("setUser",i),r("setLoading",!1)}}))),n.next=15;break;case 10:throw n.prev=10,n.t0=n["catch"](3),r("setError",n.t0.reason),r("setLoading",!1),n.t0;case 15:case"end":return n.stop()}}),n,null,[[3,10]])})))()},logoutUser:function(e){return Object(M["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,W["auth"]().signOut();case 3:r=t.sent,n("setUser",r);case 5:case"end":return t.stop()}}),t)})))()},autoLoginUser:function(e,t){var n=e.commit;n("setUser",t)},userInited:function(e,t){var n=e.commit;return n("setUserInited",t)}}},G={state:{loading:!1,error:null},mutations:{setLoading:function(e,t){e.loading=t},setError:function(e,t){e.error=t},clearError:function(e){e.error=null}},actions:{setLoading:function(e,t){e.commit("setLoading",t)},setError:function(e,t){e.commit("setError",t)}},getters:{loading:function(e){return e.loading},error:function(e){return e.error}}};r["default"].use(J["a"]);var H={state:{questions:[]},mutations:{setQuestions:function(e,t){e.questions=t}},getters:{questions:function(e){return e.questions}},actions:{fetchQuestionList:function(e,t){var n=e.commit;n("setUserInited",{userInited:!1});var r=W["database"]().ref("questions");r.limitToLast(10).on("value",(function(e){var t=[],r=e.val();for(var o in r){var i=r[o];t.push({id:o,date:i.date,question:i.question,order:i.order,time:i.time,login:i.login,comments:i.comments})}t.sort((function(e,t){return t.order>e.order?1:t.order<e.order?-1:0})),n("setQuestions",t),n("setUserInited",{userInited:!0})}))},addQuestion:function(e,t){e.commit,new Date;var n=W["database"]().ref("questions");n.push(t)},deleteQuestion:function(e,t){e.commit;var n=W["database"]().ref("questions/"+t);n.remove()},addComment:function(e,t){e.commit,new Date;var n=W["database"]().ref("questions/"+t.questionId+"/comments");n.push(t.comment)}}};r["default"].use(J["a"]);var K=new J["a"].Store({state:{},mutations:{},actions:{},modules:{user:F,question:H,common:G}}),X=n("fb9a"),V=n.n(X);n("04f2");r["default"].use(V.a,{});var Y=n("a925"),Z=n("0262"),ee=n("cd7c");r["default"].use(Y["a"]);var te=new Y["a"]({locale:"ru",messages:{en:Z,ru:ee}}),ne=n("d61f");r["default"].use(ne["a"]),r["default"].config.productionTip=!1,new r["default"]({i18n:te,router:N,store:K,created:function(){var e=this;W["initializeApp"]({apiKey:"AIzaSyDulNOkjvSqbgUqjQ-je8Nv-r9rjXgGwFw",authDomain:"zhendozzzru.firebaseapp.com",databaseURL:"https://zhendozzzru.firebaseio.com",projectId:"zhendozzzru",storageBucket:"zhendozzzru.appspot.com",messagingSenderId:"507652298679",appId:"1:507652298679:web:70d274d01670a93d5dfa32"}),W["auth"]().onAuthStateChanged((function(t){var n=W["database"]().ref("users");n.limitToLast(1).orderByChild("uid").equalTo(null!=t?t.uid:"-1").on("value",(function(t){var n=t.val();if(n){var r=Object.keys(n),o=r.length>0?n[r[0]]:{};o&&e.$store.dispatch("autoLoginUser",{uid:o.uid,login:o.login,email:o.email})}})),e.$store.dispatch("userInited",{userInited:!0})}))},render:function(e){return e(j)}}).$mount("#app")},cd7c:function(e){e.exports=JSON.parse('{"anonimous":"анонима","from":"от","new_askbutton_text":"Спросить","new_questioninput_placeholder":"Введите свой вопрос","home_askbutton_text":"Спросить","home_exitbutton_text":"Выйти","home_enterbutton_text":"Вход","home_anonimuslabel_text":"Анонимно","login_autorization_text":"Авторизация","login_registrationbutton_text":"Регистрация","login_emailinput_placeholder":"Электронная почта","login_passwordinput_placeholder":"Пароль","login_backbutton_text":"Назад","login_enterbutton_text":"Войти","register_autorization_text":"Авторизация","register_registrationbutton_text":"Регистрация","register_emailinput_placeholder":"Электронная почта","register_logininput_placeholder":"Логин","register_passwordinput_placeholder":"Пароль","register_backbutton_text":"Назад","register_registerbutton_text":"Зарегистрироваться","deletion_confirm":"Подтверждение удаления","are_you_sure?":"Вы уверены?","cancel":"Отменить","accept":"Подтвердить","enter_comment":"Введите комментарий","loading":"Загрузка"}')},d167:function(e,t,n){"use strict";var r=n("2ae3"),o=n.n(r);o.a}});
//# sourceMappingURL=app.4ce1d238.js.map